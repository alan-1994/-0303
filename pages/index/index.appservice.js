$gwx_XC_6=function(_,_v,_n,_p,_s,_wp,_wl,$gwn,$gwl,$gwh,wh,$gstack,$gwrt,gra,grb,TestTest,wfor,_ca,_da,_r,_rz,_o,_oz,_1,_1z,_2,_2z,_m,_mz,nv_getDate,nv_getRegExp,nv_console,nv_parseInt,nv_parseFloat,nv_isNaN,nv_isFinite,nv_decodeURI,nv_decodeURIComponent,nv_encodeURI,nv_encodeURIComponent,$gdc,nv_JSON,_af,_gv,_ai,_grp,_gd,_gapi,$ixc,_ic,_w,_ev,_tsd){return function(path,global){
if(typeof global==='undefined'){if (typeof __GWX_GLOBAL__==='undefined')global={};else global=__GWX_GLOBAL__;}if(typeof __WXML_GLOBAL__ === 'undefined') {__WXML_GLOBAL__={};
}__WXML_GLOBAL__.modules = __WXML_GLOBAL__.modules || {};
var e_={}
if(typeof(global.entrys)==='undefined')global.entrys={};e_=global.entrys;
var d_={}
if(typeof(global.defines)==='undefined')global.defines={};d_=global.defines;
var f_={}
if(typeof(global.modules)==='undefined')global.modules={};f_=global.modules || {};
var p_={}
__WXML_GLOBAL__.ops_cached = __WXML_GLOBAL__.ops_cached || {}
__WXML_GLOBAL__.ops_set = __WXML_GLOBAL__.ops_set || {};
__WXML_GLOBAL__.ops_init = __WXML_GLOBAL__.ops_init || {};
var z=__WXML_GLOBAL__.ops_set.$gwx_XC_6 || [];
function gz$gwx_XC_6_1(){
if( __WXML_GLOBAL__.ops_cached.$gwx_XC_6_1)return __WXML_GLOBAL__.ops_cached.$gwx_XC_6_1
__WXML_GLOBAL__.ops_cached.$gwx_XC_6_1=[];
(function(z){var a=11;function Z(ops){z.push(ops)}
Z([3,'container'])
Z([[2,'+'],[[2,'+'],[1,'min-height:'],[[6],[[6],[[7],[3,'hyy']],[3,'win']],[3,'height']]],[1,'px']])
Z([3,'transparent'])
Z([3,'__l'])
Z([3,'潮汐表'])
Z([3,'8dd740cc-1'])
Z([[7],[3,'showLocation']])
Z([3,'__e'])
Z([3,'address-w'])
Z([[4],[[5],[[4],[[5],[[5],[1,'tap']],[[4],[[5],[[4],[[5],[[5],[1,'selectLocation']],[[4],[[5],[1,'$event']]]]]]]]]]])
Z(z[3])
Z([3,'#cccccc'])
Z([3,'arrow-right'])
Z([3,'15'])
Z([3,'8dd740cc-2'])
Z([[2,'>'],[[6],[[7],[3,'$root']],[3,'g0']],[1,0]])
Z(z[3])
Z(z[7])
Z([[4],[[5],[[4],[[5],[[5],[1,'^click']],[[4],[[5],[[4],[[5],[1,'clickNotice']]]]]]]]])
Z([3,'column'])
Z([3,'closable'])
Z([[6],[[7],[3,'$root']],[3,'g1']])
Z([3,'8dd740cc-3'])
Z([[7],[3,'currentSite']])
Z([3,'tide-title'])
Z(z[7])
Z([3,'site'])
Z([[4],[[5],[[4],[[5],[[5],[1,'tap']],[[4],[[5],[[4],[[5],[[5],[1,'clickSelect']],[[4],[[5],[1,'$event']]]]]]]]]]])
Z(z[3])
Z([3,'#64a6ee'])
Z([3,'map-fill'])
Z([3,'20'])
Z([3,'margin-right:5px;'])
Z([3,'8dd740cc-4'])
Z(z[3])
Z([[9],[[9],[[9],[[8],'border',[1,'none']],[[8],'background',[1,'none']]],[[8],'width',[1,'30px']]],[[8],'height',[1,'24px']]])
Z([3,'share-square'])
Z([3,'#aaa'])
Z([3,'share'])
Z([1,true])
Z([3,'success'])
Z([3,'8dd740cc-5'])
Z(z[3])
Z(z[7])
Z([[4],[[5],[[4],[[5],[[5],[1,'^confirm']],[[4],[[5],[[4],[[5],[1,'confirm']]]]]]]]])
Z([[7],[3,'showSelect']])
Z([[7],[3,'sites']])
Z([[7],[3,'siteCode']])
Z([3,'8dd740cc-6'])
Z([[9],[[9],[[9],[[8],'fontSize',[1,'16px']],[[8],'color',[1,'#64a6ee']]],[[8],'fontWeight',[1,'bold']]],[[8],'transform',[1,'scale(1.02)']]])
Z(z[3])
Z(z[7])
Z([[7],[3,'index']])
Z([[4],[[5],[[4],[[5],[[5],[1,'^click']],[[4],[[5],[[4],[[5],[1,'clickTab']]]]]]]]])
Z([[9],[[9],[[8],'fontSize',[1,'16px']],[[8],'color',[1,'#606266']]],[[8],'transform',[1,'scale(1)']]])
Z([[9],[[8],'height',[1,'32px']],[[8],'padding',[1,'2px 7px']]])
Z([3,'label'])
Z(z[29])
Z([3,'3'])
Z([3,'28'])
Z([[7],[3,'tabs']])
Z([1,false])
Z([3,'8dd740cc-7'])
Z([[2,'==='],[[7],[3,'tab']],[1,1]])
Z(z[3])
Z([[7],[3,'showChart']])
Z([[7],[3,'t']])
Z([3,'8dd740cc-8'])
Z([[2,'==='],[[7],[3,'tab']],[1,2]])
Z(z[3])
Z(z[66])
Z([3,'8dd740cc-9'])
Z([[6],[[7],[3,'$root']],[3,'g2']])
Z([[2,'&&'],[[2,'&&'],[[7],[3,'currentSite']],[[7],[3,'currentDate']]],[[7],[3,'t']]])
Z(z[66])
})(__WXML_GLOBAL__.ops_cached.$gwx_XC_6_1);return __WXML_GLOBAL__.ops_cached.$gwx_XC_6_1
}
__WXML_GLOBAL__.ops_set.$gwx_XC_6=z;
__WXML_GLOBAL__.ops_init.$gwx_XC_6=true;
var x=['./pages/index/index.wxml'];d_[x[0]]={}
var m0=function(e,s,r,gg){
var z=gz$gwx_XC_6_1()
var o6=_mz(z,'view',['class',0,'style',1],[],e,s,gg)
var tEB=_mz(z,'my-header-navbar',['background',2,'bind:__l',1,'title',2,'vueId',3],[],e,s,gg)
_(o6,tEB)
var f7=_v()
_(o6,f7)
if(_oz(z,6,e,s,gg)){f7.wxVkey=1
var eFB=_mz(z,'view',['bindtap',7,'class',1,'data-event-opts',2],[],e,s,gg)
var bGB=_mz(z,'u-icon',['bind:__l',10,'color',1,'name',2,'size',3,'vueId',4],[],e,s,gg)
_(eFB,bGB)
_(f7,eFB)
}
var c8=_v()
_(o6,c8)
if(_oz(z,15,e,s,gg)){c8.wxVkey=1
var oHB=_mz(z,'u-notice-bar',['bind:__l',16,'bind:click',1,'data-event-opts',2,'direction',3,'mode',4,'text',5,'vueId',6],[],e,s,gg)
_(c8,oHB)
}
var h9=_v()
_(o6,h9)
if(_oz(z,23,e,s,gg)){h9.wxVkey=1
var xIB=_n('view')
_rz(z,xIB,'class',24,e,s,gg)
var oJB=_mz(z,'view',['bindtap',25,'class',1,'data-event-opts',2],[],e,s,gg)
var fKB=_mz(z,'u-icon',['bind:__l',28,'color',1,'name',2,'size',3,'style',4,'vueId',5],[],e,s,gg)
_(oJB,fKB)
_(xIB,oJB)
var cLB=_mz(z,'u-button',['bind:__l',34,'customStyle',1,'icon',2,'iconColor',3,'openType',4,'plain',5,'type',6,'vueId',7],[],e,s,gg)
_(xIB,cLB)
_(h9,xIB)
}
var hMB=_mz(z,'my-site-select-mini',['bind:__l',42,'bind:confirm',1,'data-event-opts',2,'show',3,'sites',4,'value',5,'vueId',6],[],e,s,gg)
_(o6,hMB)
var oNB=_mz(z,'u-tabs',['activeStyle',49,'bind:__l',1,'bind:click',2,'current',3,'data-event-opts',4,'inactiveStyle',5,'itemStyle',6,'keyName',7,'lineColor',8,'lineHeight',9,'lineWidth',10,'list',11,'scrollable',12,'vueId',13],[],e,s,gg)
_(o6,oNB)
var o0=_v()
_(o6,o0)
if(_oz(z,63,e,s,gg)){o0.wxVkey=1
var cOB=_mz(z,'my-tide-escharts',['bind:__l',64,'show',1,'t',2,'vueId',3],[],e,s,gg)
_(o0,cOB)
}
var cAB=_v()
_(o6,cAB)
if(_oz(z,68,e,s,gg)){cAB.wxVkey=1
var oPB=_mz(z,'my-tide-row',['bind:__l',69,'t',1,'vueId',2],[],e,s,gg)
_(cAB,oPB)
}
var oBB=_v()
_(o6,oBB)
if(_oz(z,72,e,s,gg)){oBB.wxVkey=1
}
var lCB=_v()
_(o6,lCB)
if(_oz(z,73,e,s,gg)){lCB.wxVkey=1
}
var aDB=_v()
_(o6,aDB)
if(_oz(z,74,e,s,gg)){aDB.wxVkey=1
}
f7.wxXCkey=1
f7.wxXCkey=3
c8.wxXCkey=1
c8.wxXCkey=3
h9.wxXCkey=1
h9.wxXCkey=3
o0.wxXCkey=1
o0.wxXCkey=3
cAB.wxXCkey=1
cAB.wxXCkey=3
oBB.wxXCkey=1
lCB.wxXCkey=1
aDB.wxXCkey=1
_(r,o6)
return r
}
e_[x[0]]={f:m0,j:[],i:[],ti:[],ic:[]}
if(path&&e_[path]){
return function(env,dd,global){$gwxc=0;var root={"tag":"wx-page"};root.children=[]
;g="$gwx_XC_6";var main=e_[path].f
if (typeof global==="undefined")global={};global.f=$gdc(f_[path],"",1);
try{
main(env,{},root,global);
_tsd(root)
}catch(err){
console.log(err)
}
;g="";
return root;
}
}
}
}(__g.a,__g.b,__g.c,__g.d,__g.e,__g.f,__g.g,__g.h,__g.i,__g.j,__g.k,__g.l,__g.m,__g.n,__g.o,__g.p,__g.q,__g.r,__g.s,__g.t,__g.u,__g.v,__g.w,__g.x,__g.y,__g.z,__g.A,__g.B,__g.C,__g.D,__g.E,__g.F,__g.G,__g.H,__g.I,__g.J,__g.K,__g.L,__g.M,__g.N,__g.O,__g.P,__g.Q,__g.R,__g.S,__g.T,__g.U,__g.V,__g.W,__g.X,__g.Y,__g.Z,__g.aa);if(__vd_version_info__.delayedGwx||false)$gwx_XC_6();	if (__vd_version_info__.delayedGwx) __wxAppCode__['pages/index/index.wxml'] = [$gwx_XC_6, './pages/index/index.wxml'];else __wxAppCode__['pages/index/index.wxml'] = $gwx_XC_6( './pages/index/index.wxml' );
	;__wxRoute = "pages/index/index";__wxRouteBegin = true;__wxAppCurrentFile__="pages/index/index.js";define("pages/index/index.js",function(require,module,exports,window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){
"use strict";require("../../@babel/runtime/helpers/Arrayincludes"),(global.webpackJsonp=global.webpackJsonp||[]).push([["pages/index/index"],{"1cb0":function(t,e,n){var i=n("baa9");n.n(i).a},"251b":function(t,e,n){n.r(e);var i=n("63d8"),a=n.n(i);for(var o in i)["default"].indexOf(o)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(o);e.default=a.a},"295d":function(t,e,n){n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return o})),n.d(e,"a",(function(){return i}));var i={myHeaderNavbar:function(){return n.e("components/my-header-navbar").then(n.bind(null,"42de"))},uIcon:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uview-ui/components/u-icon/u-icon")]).then(n.bind(null,"e9fa"))},uNoticeBar:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uview-ui/components/u-notice-bar/u-notice-bar")]).then(n.bind(null,"1ec1"))},uButton:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uview-ui/components/u-button/u-button")]).then(n.bind(null,"5819"))},mySiteSelectMini:function(){return n.e("components/my-site-select-mini").then(n.bind(null,"56f4"))},uTabs:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uview-ui/components/u-tabs/u-tabs")]).then(n.bind(null,"a462"))},myTideEscharts:function(){return Promise.all([n.e("common/vendor"),n.e("components/my-tide-escharts")]).then(n.bind(null,"c1ec"))},myTideRow:function(){return n.e("components/my-tide-row").then(n.bind(null,"9def"))}},a=function(){var t=this,e=(t.$createElement,t._self._c,t.notices.length),n=e>0?t.notices.map((function(t){return t.title})):null,i=t.list&&t.list.length>0,a=i?t.__map(t.list.slice(0,14),(function(e,n){return{$orig:t.__get_orig(e),g3:e.lunar.substr(2)}})):null,o=t.currentSite&&t.currentDate&&t.t?t.t.data.beach_catch_times.length:null,s=t.currentSite&&t.currentDate&&t.t&&o>0?t.currentDate.date.substr(5):null,c=t.currentSite&&t.currentDate&&t.t&&o>0?t.t.data.beach_catch_times.map((function(t){return t.start+"-"+t.end})).join("，"):null,r=t.currentSite&&t.currentDate&&t.t&&!(o>0)?t.currentDate.date.substr(5):null;t._isMounted||(t.e0=function(e,n){var i=arguments[arguments.length-1].currentTarget.dataset,a=i.eventParams||i["event-params"];return n=a.item,t.clickDate(n)}),t.$mp.data=Object.assign({},{$root:{g0:e,g1:n,g2:i,l0:a,g4:o,g5:s,g6:c,g7:r}})},o=[]},"63d8":function(t,e,n){(function(t){var i=n("47a9");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=i(n("053a")),o={onShareAppMessage:function(){return this.currentSite&&(this.shareData.title="".concat(this.currentSite.name,"最新潮汐表，提前查询赶海时间"),this.shareData.path="/pages/index/index?siteCode=".concat(this.currentSite.code)),this.shareData},onPullDownRefresh:function(){this.render()},data:function(){return{showLocation:!1,showSelect:!1,showSetting:!1,showChart:!0,address:"",sites:[],timer:null,t:null,tide:null,date:"",list:[],notices:[],menus:[],showAsk:!1,asks:[],index:this.$store.state.page.tab_index,tabs:[{label:"图表",value:1},{label:"列表",value:2}]}},computed:{siteCode:{get:function(){return this.$store.state.page.siteCode},set:function(){}},calendarList:function(){var t={},e=[];if(this.list.length<=30){var n=((new Date).getDay()-1+7)%7;return[{month:"",empty:Array(n).fill(""),list:this.list}]}return this.list.forEach((function(n){var i=+n.date.split("-")[1]+"月";if(void 0!==t[i])e[t[i]].list.push(n);else{var a=(new Date(n.date).getDay()-1+7)%7,o=Array(a).fill("");e.push({month:i,empty:o,list:[n]}),t[i]=e.length-1}})),e},currentSite:function(){var t=this;return this.sites.find((function(e){return e.code===t.siteCode}))},currentDate:function(){var t=this;return this.list.find((function(e){return e.date===t.date}))},customTips:function(){var t="",e=this.setting.site[this.siteCode];return e?(e.has_custom_catch&&(t+="赶海:".concat(e.custom_catch_value,"m ")),e.custom_time_value&&(t+="偏移:".concat(e.custom_time_value,"h ")),e.custom_height_value&&100!==e.custom_height_value&&(t+="潮高:".concat(e.custom_height_value,"% ")),t):t},tab:function(){return this.tabs[this.index].value}},onLoad:function(){var e=this,n=this.$Route.query;n.siteCode&&this.$store.commit("updatePage",{siteCode:n.siteCode,has_select_code:!0}),this.render(),this.$hyy.getLocation({success:function(n){var i=n.longitude,a=n.latitude;e.$api.getTideNear({lng:i,lat:a}).then((function(n){1===n.code&&e.siteCode!==n.data.code&&t.showModal({title:"定位提示",content:"距离你最近的港口是 ".concat(n.data.province,"/").concat(n.data.city,"/").concat(n.data.name,",是否切换？"),cancelText:"取消",confirmText:"切换",success:function(t){t.confirm&&(e.$store.commit("updatePage",{siteCode:n.data.code}),e.render())}})}))},fail:function(t){console.log("定位：",t)}},!0)},onShow:function(){if(this.isReady){if(this.showLocation)return;this.getTideList()}this.isReady=!0},onReady:function(){var t=this;this.timer=setInterval((function(){t.t&&t.t.updateNowData()}),5e3)},onUnload:function(){clearInterval(this.timer)},methods:{selectLocation:function(){var e=this;t.chooseLocation({success:function(n){var i=n.name,a=n.longitude,o=n.latitude;e.address=i,e.$api.getTideNear({lng:a,lat:o}).then((function(n){1===n.code?t.showModal({title:i,content:n.data.content,cancelText:"取消",confirmText:"进入",success:function(t){t.confirm&&(e.$store.commit("updatePage",{siteCode:n.data.code,has_select_code:!0}),e.showLocation=!1,e.render(),e.$report("select_near",{a_address:i,site:n.data.province+n.data.city+n.data.name}))}}):e.next()}))},fail:function(t){console.log(t)}})},next:function(){this.$store.commit("updatePage",{has_select_code:!0}),this.showLocation=!1,this.render()},render:function(){this.getTideList(),this.renderChart(),this.getTideIndex()},getTideIndex:function(){var e=this;this.$api.getTideIndex({}).then((function(n){t.stopPullDownRefresh(),1===n.code?(e.notices=n.data.mini_notices||[],e.menus=n.data.menus,e.showAsk=n.data.show_ask,e.asks=n.data.asks,e.sites=n.data.sites):t.showToast({title:n.msg,icon:"none"})}))},getTideList:function(){var e=this;this.$api.getTideList({}).then((function(n){1===n.code?(e.list=n.data,e.date||(e.date=n.data[0].date)):t.showToast({title:n.msg,icon:"none"})}))},renderChart:function(){var e=this,n=this.setting.site[this.siteCode],i={};this.date&&(i.date=this.date),n&&n.custom_time_value&&(i.offset=n.custom_time_value),this.$api.getTide(i).then((function(i){if(1===i.code){var o={};n&&(n.has_custom_catch&&(o.custom_catch_value=n.custom_catch_value),n.custom_height_value&&(o.custom_height_value=n.custom_height_value)),e.t=new a.default(i.data,o),e.tide=i.data,e.tide.tips&&(e.tide.tips=e.tide.tips.replace(/<p>/g,'<p class="p">')),e.tide.warn&&t.showToast({title:e.tide.warn,icon:"none"})}else t.showToast({title:i.msg,icon:"none"})}))},clickSelect:function(){this.showSelect=!0,this.showChart=!1},clickSetting:function(){this.showSetting=!0,this.showChart=!1},confirm:function(t,e){this.showSelect=!1,this.showChart=!0,this.$store.commit("updatePage",{siteCode:t}),this.render(),this.$report("select_site",{a_site:this.currentSite.province+this.currentSite.city+this.currentSite.name,tab:e})},clickDate:function(t){this.date!==t.date&&(this.date=t.date,this.renderChart(),["T193","T192"].includes(this.siteCode)&&this.$report("click_calendar",{a_date:t.date,site:this.currentSite.province+this.currentSite.city+this.currentSite.name,text:t.text}))},nextDay:function(t){var e=this,n=this.list.findIndex((function(t){return t.date===e.date}));n=Math.min(Math.max(n+t,0),this.list.length-1),this.date!==this.list[n].date&&(this.date=this.list[n].date,this.renderChart())},clickNotice:function(e){var n=this,i=this.notices[e];if(this.$report("click_notice",{a_title:i.title}),"link"===i.type)return this.$store.commit("updatePage",{data:i}),void this.$Router.push({name:"notice"});"mp-weixin"===this.$store.state.system.client&&i.comment?t.showModal({title:i.title,content:i.content,cancelText:"关闭",confirmText:"好评",confirmColor:"#f98b3c",success:function(t){t.confirm&&n.postComment((function(){n.$report("post_comment",{a_from:"通知:"+i.title})}))}}):t.showModal({title:i.title,content:i.content,showCancel:!1,confirmText:"关闭"})},clickMenu:function(t){"link"===t.type?this.$Router.push({path:"/web",query:{url:t.value,title:t.label}}):"path"===t.type&&this.$Router.push({path:t.value,query:{lng:this.currentSite.location[0],lat:this.currentSite.location[1],address:this.currentSite.province+this.currentSite.city+this.currentSite.name}}),this.$report("click_menu",{a_name:t.label})},clickTab:function(t){this.index=t.index,this.$store.commit("updatePage",{tab_index:t.index})}}};e.default=o}).call(this,n("df3c").default)},"920d5":function(t,e,n){(function(t,e){var i=n("47a9");n("3ed2"),i(n("3240"));var a=i(n("a4b8"));t.__webpack_require_UNI_MP_PLUGIN__=n,e(a.default)}).call(this,n("3223").default,n("df3c").createPage)},a4b8:function(t,e,n){n.r(e);var i=n("295d"),a=n("251b");for(var o in a)["default"].indexOf(o)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(o);n("1cb0");var s=n("828b"),c=Object(s.a)(a.default,i.b,i.c,!1,null,null,null,!1,i.a,void 0);e.default=c.exports},baa9:function(t,e,n){}},[["920d5","common/runtime","common/vendor"]]]);
},{isPage:true,isComponent:true,currentFile:'pages/index/index.js'});require("pages/index/index.js");